/**
 * ==---------------------------------------------------------------------------------==
 *
 *  File            :   main.swift
 *  Project         :   HTMLString/Performance
 *  Author          :   Alexis Aubry Radanovic
 *
 *  License         :   The MIT License (MIT)
 *
 * ==---------------------------------------------------------------------------------==
 *
 * A tool to measure the performance of escaping and unescaping.
 *
 * ==---------------------------------------------------------------------------------==
 *
 *	The MIT License (MIT)
 *	Copyright (c) 2016-2017 Alexis Aubry Radanovic
 *
 *	Permission is hereby granted, free of charge, to any person obtaining a copy of
 *	this software and associated documentation files (the "Software"), to deal in
 *	the Software without restriction, including without limitation the rights to
 *	use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of
 *	the Software, and to permit persons to whom the Software is furnished to do so,
 *	subject to the following conditions:
 *
 *	The above copyright notice and this permission notice shall be included in all
 *	copies or substantial portions of the Software.
 *
 *	THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 *	IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
 *	FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
 *	COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
 *	IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
 *	CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 *
 * ==---------------------------------------------------------------------------------==
 */

import Foundation
import Dispatch
import HTMLString

// MARK: Configuration

let averageTimeSamplesCount = 1_000
let version = "2.1.0"

// MARK: - Utility

func measure(_ block: () -> Void) -> TimeInterval {

    var times = [TimeInterval]()
    times.reserveCapacity(averageTimeSamplesCount)

    while times.count < averageTimeSamplesCount {

        let start = DispatchTime.now()
        block()
        let end = DispatchTime.now()

        let nanoTime = end.uptimeNanoseconds - start.uptimeNanoseconds
        let timeInterval = TimeInterval(nanoTime) / 1_000_000_000

        times.append(timeInterval)

    }

    let sum = times.reduce(Double()) { $0 + $1 }
    let average = sum / Double(averageTimeSamplesCount)

    return Double(round(1_000_000*average)/1_000_000) // +/- 10^-6 average

}

// MARK: - Data

let bigEscapableText = "Informations et mentions lÃ©gales PropriÃ©tÃ© du site ; acceptation des conditions d'utilisation Les prÃ©sentes conditions gÃ©nÃ©rales d'utilisation (les Â« Conditions d'utilisation Â») s'appliquent au site web d'Apple sis Ã  l'adresse www.apple.com et Ã  tous les sites associÃ©s liÃ©s au site www.apple.com par Apple, ses filiales et sociÃ©tÃ©s affiliÃ©es, dans le monde entier (collectivement dÃ©signÃ©s par le terme le Â« Site Â»). Le Site est la propriÃ©tÃ© d'Apple Inc. (Â« Apple Â») et de ses concÃ©dants. EN UTILISANT LE SITE, VOUS ACCEPTEZ LES PRÃ‰SENTES CONDITIONS D'UTILISATION ; SI VOUS NE LES ACCEPTEZ PAS, VEUILLEZ NE PAS UTILISER LE SITE. Apple se rÃ©serve le droit, Ã  sa seule discrÃ©tion et Ã  tout moment, de changer, modifier, complÃ©ter ou supprimer des parties de ces Conditions d'utilisation. Il est de votre responsabilitÃ© de consulter pÃ©riodiquement ces Conditions d'utilisation pour voir si des modifications y ont Ã©tÃ© apportÃ©es. Si vous continuez Ã  utiliser le Site aprÃ¨s publication des modifications apportÃ©es, cela signifiera que vous acceptez lesdites modifications. Tant que vous vous conformez aux prÃ©sentes Conditions d'utilisation, Apple vous accorde un droit personnel limitÃ©, non exclusif et non cessible d'accÃ¨s au Site et d'utilisation du Site. Contenu L'ensemble des textes, graphiques, interfaces utilisateur, interfaces visuelles, photographies, marques commerciales, logos, sons, musiques, illustrations et codes informatiques (collectivement dÃ©signÃ©s par le terme le Â« Contenu Â»), notamment le design, la structure, la sÃ©lection, la coordination, l'expression, l'aspect et la convivialitÃ©, la prÃ©sentation et l'agencement de ce Contenu, figurant sur le Site est dÃ©tenu, contrÃ´lÃ© ou cÃ©dÃ© sous licence par ou Ã  Apple, et est protÃ©gÃ© par la lÃ©gislation sur l'habillage commercial, les droits d'auteur, les brevets et les marques, et diverses autres lois applicables en matiÃ¨re de propriÃ©tÃ© intellectuelle et de concurrence dÃ©loyale. Sauf mention expresse figurant dans les prÃ©sentes Conditions d'utilisation, aucune section du Site ni aucun Contenu ne peuvent Ãªtre copiÃ©s, reproduits, republiÃ©s, tÃ©lÃ©chargÃ©s, publiÃ©s, exposÃ©s en public, encodÃ©s, traduits, transmis ou diffusÃ©s de quelque faÃ§on que ce soit (y compris par Â« Ã©criture miroir Â») sur un autre ordinateur, serveur, site web ou support de publication ou de diffusion, ou pour quelque entreprise commerciale que ce soit, sans l'accord Ã©crit prÃ©alable d'Apple. Vous pouvez utiliser les informations sur les produits et les services Apple (telles que les fiches techniques, les articles de la base de connaissances et informations similaires) mis Ã  disposition Ã  dessein par Apple en vue de leur tÃ©lÃ©chargement, dans la mesure oÃ¹ (1) vous ne supprimez pas les avis de droits d'auteur sur les copies de ces documents, (2) vous utilisez ces informations pour votre usage personnel et Ã  des fins non commerciales et vous ne copiez pas et ne publiez pas ces informations sur un ordinateur en rÃ©seau et vous ne les diffusez pas dans quelque mÃ©dia que ce soit, (3) vous n'apportez pas de modifications Ã  ces informations et (4) vous n'accordez aucun engagement ni aucune garantie quant Ã  la teneur de ces documents. Utilisation du Site Vous n'Ãªtes pas autorisÃ© Ã  utiliser des dispositifs, programmes, algorithmes ou autres mÃ©thodes automatiques de type Â« lien profond Â», Â« gratte-pages Â», Â« robot Â» ou Â« araignÃ©e Â», ou tout autre processus manuel similaire ou Ã©quivalent, pour accÃ©der Ã , acquÃ©rir, copier ou surveiller toute partie du Site ou du Contenu, ni Ã  reproduire ou contourner la structure navigationnelle ou la prÃ©sentation du Site ou du Contenu pour vous procurer ou essayer de vous procurer des donnÃ©es, des documents ou des informations par des moyens non mis Ã  dessein Ã  votre disposition par le biais du Site. Apple se rÃ©serve le droit d'interdire ce type d'activitÃ©. Vous ne devez pas essayer d'accÃ©der de faÃ§on illicite Ã  toute section ou fonctionnalitÃ© du Site, ni Ã  tout autre systÃ¨me ou rÃ©seau connectÃ© au Site ou Ã  un serveur Apple, ni aux services offerts sur ou par l'intermÃ©diaire du Site, par piratage informatique, Â« reniflage Â» de mots de passe ou tout autre moyen illÃ©gitime. Vous ne devez pas essayer de sonder, d'analyser ou de tester la vulnÃ©rabilitÃ© du Site ou de tout rÃ©seau connectÃ© au Site, ni enfreindre les mesures de sÃ©curitÃ© et d'authentification mises en place sur le Site ou les rÃ©seaux connectÃ©s au Site. Vous n'Ãªtes pas autorisÃ© Ã  rÃ©tro-interroger, tracer ou essayer de tracer les informations sur les autres utilisateurs ou visiteurs du Site, ou les autres clients d'Apple, notamment tout compte Apple dont vous n'Ãªtes pas le dÃ©tenteur ou sa source, ni Ã  exploiter le Site ou les services ou les informations mis Ã  disposition ou offerts sur ou via le Site, de quelque maniÃ¨re que ce soit, dans le but de rÃ©vÃ©ler ces informations, notamment les informations d'identification personnelles ou les informations autres que vos propres informations, telles qu'elles apparaissent sur le Site. Vous vous engagez Ã  ne prendre aucune mesure qui imposerait une charge excessive ou dÃ©raisonnable sur l'infrastructure du Site ou des systÃ¨mes ou des rÃ©seaux d'Apple, ou de tout systÃ¨me ou rÃ©seau connectÃ© au Site ou Ã  Apple. Vous vous engagez Ã  n'utiliser aucun dispositif, logiciel ou sous-programme pour interfÃ©rer ou essayer d'interfÃ©rer sur le bon fonctionnement du Site ou de toute transaction conduite sur le Site ou sur l'utilisation du Site par toute autre personne. Vous ne devez pas essayer de contrefaire les en-tÃªtes ou manipuler les identifiants de quelque maniÃ¨re que ce soit pour dÃ©guiser l'origine d'un message ou d'une transmission envoyÃ© Ã  Apple sur ou via le Site, ou d'un service offert sur ou via le Site. Vous ne devez pas prÃ©tendre Ãªtre ou reprÃ©senter quelqu'un d'autre, ni vous faire passer pour une autre entitÃ© physique ou morale. Vous ne devez pas utiliser le Site ou son Contenu dans un dessein illicite ou prohibÃ© par les prÃ©sentes Conditions d'utilisation, ni en vue d'encourager toute activitÃ© illÃ©gale ou autre portant atteinte aux droits d'Apple ou de tiers. Achats ; autres conditions gÃ©nÃ©rales Des conditions gÃ©nÃ©rales annexes pourront s'appliquer Ã  des achats de biens ou de services, ainsi qu'Ã  des sections ou fonctionnalitÃ©s spÃ©cifiques du Site, notamment les concours, promotions et autres offres similaires, lesdites conditions Ã©tant intÃ©grÃ©es aux prÃ©sentes Conditions d'utilisation Ã  titre de rÃ©fÃ©rence. Vous acceptez de vous conformer Ã  ces conditions gÃ©nÃ©rales annexes, en confirmant notamment le cas Ã©chÃ©ant avoir l'Ã¢ge lÃ©gal requis pour utiliser ou participer au service ou Ã  l'offre concernÃ©. En cas de contradiction entre les prÃ©sentes Conditions d'utilisation et les conditions publiÃ©es pour, ou applicables Ã  une section spÃ©cifique du Site ou pour un service offert sur ou via le Site, ces derniÃ¨res conditions prÃ©vaudront et rÃ©giront l'utilisation de cette section du Site ou de ce service spÃ©cifique. Le cas Ã©chÃ©ant, les obligations d'Apple vis-Ã -vis de ses produits et services sont rÃ©gies uniquement par les conventions aux termes desquelles elles ont Ã©tÃ© dÃ©finies et aucun Ã©lÃ©ment figurant sur ce Site ne saurait Ãªtre interprÃ©tÃ© de faÃ§on Ã  modifier ces conventions. Apple pourra apporter des changements aux produits et services offerts sur le Site ou aux prix applicables Ã  ces produits et services Ã  tout moment et sans prÃ©avis. Les informations publiÃ©es sur le Site concernant des produits et des services peuvent Ãªtre obsolÃ¨tes, et Apple ne s'engage nullement Ã  mettre Ã  jour les informations publiÃ©es sur le Site relatives Ã  ces produits et services. Les conditions gÃ©nÃ©rales ci-aprÃ¨s concernent et rÃ©gissent Ã©galement l'utilisation du Site, et sont incorporÃ©es ici Ã  titre de rÃ©fÃ©rence : Informations relatives aux marques commerciales Informations relatives aux droits d'auteur Droits et autorisations Actions en violation de droits d'auteur Lutte contre le piratage Signaler un acte de piratage Politique d'Apple en matiÃ¨re de soumission d'idÃ©es non sollicitÃ©es Informations sur les licences de logiciels Contacts juridiques Les rÃ¨gles et politiques Ã©noncÃ©es pourront Ãªtre modifiÃ©es de temps en temps et seront applicables dÃ¨s la publication de ces modifications sur le Site. Comptes, mots de passe et sÃ©curitÃ© Certains services et fonctionnalitÃ©s offerts sur ou via le Site peuvent nÃ©cessiter l'ouverture d'un compte (y compris la configuration d'un identifiant Apple et d'un mot de passe). Vous avez l'entiÃ¨re responsabilitÃ© de prÃ©server la confidentialitÃ© des informations relatives Ã  votre compte, notamment votre mot de passe, et de toutes les opÃ©rations effectuÃ©es sous votre compte. Vous vous engagez Ã  prÃ©venir Apple immÃ©diatement en cas d'utilisation non autorisÃ©e de votre compte ou de votre mot de passe, ou de toute violation de la sÃ©curitÃ©. Toutefois, vous pourrez Ãªtre tenu pour responsable des prÃ©judices subis par Apple ou par tout autre utilisateur ou visiteur du Site dÃ» Ã  l'utilisation de votre identifiant Apple, votre mot de passe ou votre compte par une autre personne. Vous n'Ãªtes pas autorisÃ© Ã  utiliser l'identifiant Apple, le mot de passe ou le compte d'une autre personne, Ã  quelque moment que ce soit, sans l'autorisation et l'accord explicites du dÃ©tenteur de cet identifiant Apple, de ce mot de passe ou de ce compte. Apple ne pourra Ãªtre tenue pour responsable des prÃ©judices dÃ©coulant de votre manquement Ã  respecter ces obligations. ConfidentialitÃ© L'Engagement de confidentialitÃ© d'Apple s'applique Ã  l'utilisation de ce Site, et ses conditions sont intÃ©grÃ©es aux prÃ©sentes Conditions d'utilisation Ã  titre de rÃ©fÃ©rence. Pour consulter l'Engagement de confidentialitÃ© d'Apple, cliquez ici. En outre, en utilisant ce Site, vous reconnaissez et acceptez le fait que les transmissions via Internet ne sont jamais totalement confidentielles et sÃ»res. Vous comprenez le fait que tout message ou toute information que vous transmettez au Site peut Ãªtre lu ou interceptÃ© par d'autres, mÃªme si un avis spÃ©cial prÃ©cise qu'une transmission donnÃ©e (coordonnÃ©es de carte bancaire, par exemple) est chiffrÃ©e. Liens vers d'autres sites et vers le site Apple Ce Site peut contenir des liens vers d'autres sites web tiers indÃ©pendants (les Â« Sites liÃ©s Â»). Ces Sites liÃ©s sont indiquÃ©s uniquement Ã  titre de commoditÃ© pour nos visiteurs. Ces Sites liÃ©s ne sont pas sous le contrÃ´le d'Apple, et Apple n'est pas responsable et n'avalise pas le contenu de ces Sites liÃ©s, y compris des informations qui y sont publiÃ©es. Vous devrez vous faire votre propre jugement concernant vos interactions avec ces Sites liÃ©s. Exclusions de garantie APPLE NE GARANTIT PAS QUE LE SITE OU SON CONTENU OU LES SERVICES ET FONCTIONNALITÃ‰S OFFERTS SUR LE SITE SERONT EXEMPTS D'ERREURS OU ACCESSIBLES DE FAÃ‡ON ININTERROMPUE, QUE LES DÃ‰FAUTS Ã‰VENTUELS SERONT CORRIGÃ‰S, NI QUE L'UTILISATION DU SITE PRODUIRA DES RÃ‰SULTATS SPÃ‰CIFIQUES. LE SITE ET SON CONTENU SONT FOURNIS SUR UNE BASE Â« EN L'Ã‰TAT Â» ET Â« SOUS RÃ‰SERVE DE DISPONIBILITÃ‰ Â». TOUTES LES INFORMATIONS FOURNIES SUR LE SITE SONT SUSCEPTIBLES D'ÃŠTRE MODIFIÃ‰ES SANS PRÃ‰AVIS. APPLE NE PEUT GARANTIR QUE LES FICHIERS ET LES DONNÃ‰ES QUE VOUS TÃ‰LÃ‰CHARGEZ DEPUIS LE SITE SERONT EXEMPTS DE VIRUS, DE CONTAMINATION OU DE FONCTIONNALITÃ‰S MALVEILLANTES. APPLE REJETTE TOUTE FORME DE GARANTIE, EXPLICITE OU IMPLICITE, NOTAMMENT TOUTE GARANTIE D'EXACTITUDE, DE NON-CONTREFAÃ‡ON, DE QUALITÃ‰ MARCHANDE OU D'ADAPTATION Ã€ UN USAGE PARTICULIER. APPLE REJETTE Ã‰GALEMENT TOUTE RESPONSABILITÃ‰ AU REGARD DES ACTES, DES OMISSIONS OU DU COMPORTEMENT DE TIERS EN CONNEXION OU ASSOCIÃ‰S AVEC VOTRE UTILISATION DU SITE ET/OU DE SERVICES APPLE. VOUS ASSUMEZ L'ENTIÃˆRE RESPONSABILITÃ‰ QUANT Ã€ VOTRE UTILISATION DU SITE ET DES SITES LIÃ‰S. VOTRE SEUL RECOURS CONTRE APPLE EN CAS DE MÃ‰CONTENTEMENT AU REGARD DU SITE OU D'UN CONTENU EST D'ARRÃŠTER D'UTLISER LE SITE OU LE CONTENU EN QUESTION. CETTE LIMITATION DE MESURE RÃ‰PARATOIRE FAIT PARTIE DE LA TRANSACTION ENTRE LES PARTIES. Les exclusions de garantie ci-dessus concernent l'ensemble des dommages, pertes ou prÃ©judices dus Ã  tout dÃ©faut d'exÃ©cution, erreur, omission, interruption, suppression, dÃ©faut, retard d'exÃ©cution ou de transmission, virus informatique, rupture de ligne de communication, vol, destruction, accÃ¨s illicite ou utilisation, que ce soit pour rupture de contrat, faute professionnelle, nÃ©gligence ou toute autre cause d'action. Apple se rÃ©serve le droit d'effectuer l'une des actions suivantes Ã  tout moment et sans prÃ©avis : (1) modifier, suspendre ou bloquer le fonctionnement ou l'accÃ¨s Ã  tout ou partie du Site, pour quelque motif que ce soit ; (2) modifier tout ou partie du Site et toutes rÃ¨gles ou conditions applicables ; (3) interrompre le fonctionnement de tout ou partie du site, Ã  des fins de maintenance pÃ©riodique ou non, de correction d'erreurs ou de modifications. Limitation de responsabilitÃ© Dans la mesure autorisÃ©e par la loi, Apple ne pourra en aucun cas Ãªtre tenue pour responsable en cas de dommages indirects, exemplaires, accessoires ou punitifs, y compris de toute perte de bÃ©nÃ©fice, mÃªme si Apple a Ã©tÃ© prÃ©venue de l'Ã©ventualitÃ© de tels dommages. Si, nonobstant les autres dispositions des prÃ©sentes Conditions d'utilisation, Apple Ã©tait tenue pour responsable de dommages ou de prÃ©judices que vous auriez subis des consÃ©quences de, ou en rapport avec l'utilisation du Site ou de tout Contenu, la responsabilitÃ© d'Apple ne pourrait en aucun cas Ãªtre engagÃ©e pour un montant supÃ©rieur (1) au total des droits d'abonnement ou droits similaires associÃ©s Ã  l'utilisation d'un service ou d'une fonctionnalitÃ© du Site payÃ©s au cours des six mois prÃ©cÃ©dant la date de la plainte initiale portÃ©e contre Apple (Ã  l'exclusion du prix d'achat de tout produit matÃ©riel ou logiciel Apple ou de tout programme AppleCare ou programme d'assistance similaire) ou (2) Ã  100,00 USD. Certaines juridictions n'autorisant pas les limites de responsabilitÃ©, il se peut que la limitation susmentionnÃ©e ne vous concerne pas. Indemnisation Vous vous engagez Ã  indemniser et Ã  dÃ©gager de toute responsabilitÃ© Apple, ses dirigeants, administrateurs, actionnaires, prÃ©dÃ©cesseurs, successeurs, employÃ©s, agents, filiales et sociÃ©tÃ©s affiliÃ©es au regard de toute demande, perte, responsabilitÃ© financiÃ¨re, rÃ©clamation ou dÃ©pense (y compris les frais juridiques) rÃ©sultant d'actions lancÃ©es par des tiers Ã  l'encontre d'Apple dues Ã , ou en rapport avec votre utilisation du Site. Infraction aux prÃ©sentes conditions d'utilisation Apple pourra divulguer les informations que nous dÃ©tenons sur vous (y compris votre identitÃ©) si nous dÃ©terminons qu'une telle divulgation est nÃ©cessaire en connexion avec une enquÃªte ou une plainte concernant votre utilisation du Site, ou pour identifier, contacter ou poursuivre une personne soupÃ§onnÃ©e de porter prÃ©judice aux, ou d'interfÃ©rer avec, volontairement ou non, les droits ou la propriÃ©tÃ© d'Apple ou avec les droits ou la propriÃ©tÃ© de visiteurs ou d'utilisateurs du Site, y compris les clients d'Apple. Apple se rÃ©serve le droit, Ã  tout moment, de divulguer toutes les informations jugÃ©es nÃ©cessaires pour se conformer Ã  la loi, la rÃ©glementation, la voie judiciaire ou une requÃªte du gouvernement. Apple pourra Ã©galement divulguer vos informations si nous dÃ©terminons que la loi en vigueur requiert ou autorise cette divulgation, notamment dans le cadre d'Ã©change d'informations avec d'autres sociÃ©tÃ©s et organisations Ã  des fins de protection contre la fraude. Vous reconnaissez et acceptez le fait qu'Apple pourra conserver les informations transmises ou communiquÃ©es par vous Ã  Apple par l'intermÃ©diaire du Site ou des services offerts sur ou via le Site, et pourra divulguer ces informations dans la mesure oÃ¹ la loi l'exige ou si Apple dÃ©termine qu'une telle conservation ou divulgation est raisonnablement nÃ©cessaire pour (1) se conformer Ã  la voie du droit, (2) faire appliquer les prÃ©sentes, (3) rÃ©agir Ã  des plaintes pour violation des droits d'autres personnes par ces donnÃ©es, ou (4) protÃ©ger les droits, la propriÃ©tÃ© et la sÃ©curitÃ© d'Apple, de ses employÃ©s, des utilisateurs et des visiteurs du site, et du public. Vous convenez du fait qu'Apple pourra, Ã  sa seule discrÃ©tion et sans prÃ©avis, rÃ©silier votre droit d'accÃ¨s au Site et/ou vous empÃªcher d'accÃ©der au Site Ã  l'avenir s'il est dÃ©terminÃ© que vous n'avez pas respectÃ© les prÃ©sentes Conditions d'utilisation ou d'autres accords ou directives Ã©ventuellement associÃ©s Ã  l'utilisation du Site. Vous convenez Ã©galement du fait que toute infraction aux prÃ©sentes Conditions d'utilisation constituera une pratique commerciale illÃ©gale et dÃ©loyale, et causera un prÃ©judice irrÃ©parable Ã  Apple au regard duquel des dommages-intÃ©rÃªts monÃ©taires seraient inadÃ©quats, et qu'Apple pourra obtenir toute mesure de redressement par voie d'injonction ou en Ã‰quitÃ© considÃ©rÃ©e comme nÃ©cessaire ou appropriÃ©e eu Ã©gard aux circonstances. Ces mesures de redressement s'entendent en complÃ©ment des autres voies de recours d'Apple. Vous convenez du fait qu'Apple pourra, Ã  sa seule discrÃ©tion et sans prÃ©avis, rÃ©silier votre droit d'accÃ¨s au Site pour un motif dÃ©terminÃ©, notamment (1) sur demande d'un organisme d'application de la loi ou d'un autre organisme public, (2) Ã  votre demande (suppression de compte sur demande), (3) en cas d'interruption ou de modification importante du Site ou d'un service offert sur ou via le Site, ou (4) en cas de problÃ¨mes techniques inattendus. Si Apple entame des poursuites judiciaires Ã  votre encontre des suites d'une infraction par vous aux prÃ©sentes Conditions d'utilisation, Apple aura le droit de se faire rembourser par vous, et vous acceptez de payer, les honoraires d'avocat et les frais ainsi encourus, en plus des autres rÃ©parations accordÃ©es Ã  Apple. Vous convenez du fait qu'Apple ne pourra Ãªtre tenue pour responsable Ã  votre Ã©gard ou Ã  l'Ã©gard d'un tiers pour votre rÃ©siliation du droit d'accÃ¨s au Site des suites d'une infraction aux prÃ©sentes Conditions d'utilisation. Droit applicable ; rÃ©solution des litiges Vous convenez du fait que toute matiÃ¨re associÃ©e Ã  votre accÃ¨s ou votre utilisation du Site, y compris les litiges Ã©ventuels, sera rÃ©gie par les lois des Ã‰tats-Unis et par les lois de l'Ã‰tat de Californie, indÃ©pendamment des dispositions en matiÃ¨re de conflit des lois. Vous reconnaissez la compÃ©tence du tribunal d'Ã‰tat et du tribunal fÃ©dÃ©ral du comtÃ© de Santa Clara, Californie, et renoncez Ã  toute objection quant Ã  cette compÃ©tence. Toute rÃ©clamation aux termes des prÃ©sentes Conditions d'utilisation doit Ãªtre portÃ©e dans un dÃ©lai d'un (1) an Ã  compter de l'occurrence de la cause d'action, aprÃ¨s quoi il y aura prescription. Aucun dommage-intÃ©rÃªt autre que les dÃ©bours ne pourra Ãªtre recouvrÃ© ou perÃ§u, Ã©tant entendu que la partie gagnante pourra Ãªtre remboursÃ©e des frais et honoraires d'avocat encourus. En cas de controverse ou de litige entre vous et Apple dÃ©coulant de, ou en rapport avec votre utilisation du Site, les parties devront essayer de rÃ©soudre ce litige rapidement et de bonne foi. En cas d'incapacitÃ© Ã  rÃ©soudre ce litige dans un dÃ©lai raisonnable (qui ne pourra dÃ©passer trente (30) jours), l'une ou l'autre partie pourra soumettre ledit litige Ã  mÃ©diation. En cas d'incapacitÃ© Ã  rÃ©soudre le litige par le biais de la mÃ©diation, les parties seront alors libres d'exercer les droits ou les voies de recours Ã  leur disposition aux termes de la loi en vigueur. NullitÃ© en cas d'interdiction Apple administre et exploite le Site www.apple.com Ã  partir de ses bureaux de Cupertino en Californie, Ã‰tats-Unis ; les autres sites Apple peuvent Ãªtre administrÃ©s et exploitÃ©s depuis divers emplacements en dehors des Ã‰tats-Unis. Bien que le Site soit accessible partout dans le monde, l'ensemble des fonctionnalitÃ©s, produits et services mentionnÃ©s, rÃ©fÃ©rencÃ©s, fournis ou offerts sur ou via le Site ne sont pas accessibles Ã  toutes les personnes ou dans toutes les zones gÃ©ographiques, ou appropriÃ©s ou disponibles pour une utilisation en dehors des Ã‰tats-Unis. Apple se rÃ©serve le droit de limiter, Ã  sa seule discrÃ©tion, la fourniture et la quantitÃ© de toute fonctionnalitÃ©, produit ou service mis Ã  disposition de toute personne ou zone gÃ©ographique. Toute offre de fonctionnalitÃ©, de produit ou de service faite sur le Site est nulle et non avenue dans les pays oÃ¹ elle est interdite. Si vous choisissez d'accÃ©der au Site depuis un emplacement situÃ© en dehors des Ã‰tats-Unis, vous le faites Ã  votre propre initiative et il est de votre seule responsabilitÃ© de vous conformer aux lois locales en vigueur. Divers Vous n'Ãªtes pas autorisÃ© Ã  utiliser, exporter ou rÃ©exporter tout Contenu ou toute copie ou adaptation de ce Contenu, ou tout produit ou service offert sur le Site, en infraction aux lois ou rÃ¨glements applicables, notamment les lois et les rÃ¨glements sur le contrÃ´le Ã  l'exportation des Ã‰tats-Unis. Si des dispositions des prÃ©sentes Conditions d'utilisation Ã©taient considÃ©rÃ©es comme nulles ou inapplicables par une cour de justice ou un autre tribunal de la juridiction compÃ©tente, ces dispositions devront Ãªtre limitÃ©es ou supprimÃ©es, dans la mesure minimale nÃ©cessaire, et remplacÃ©es par des dispositions valables qui expriment mieux l'intention de ces Conditions d'utilisation de faÃ§on Ã  ce qu'elles restent pleinement applicables. Les prÃ©sentes Conditions d'utilisation constituent la globalitÃ© de l'accord entre vous et Apple concernant l'utilisation du Site, et les autres accords Ã©crits ou oraux existant prÃ©cÃ©demment entre vous et Apple concernant cette utilisation sont annulÃ©s et remplacÃ©s par les prÃ©sentes. Apple n'acceptera aucune contre-proposition relative Ã  ces Conditions d'utilisation, et toutes les propositions de cette nature sont catÃ©goriquement rejetÃ©es aux termes des prÃ©sentes. Tout manquement d'Apple Ã  insister sur, ou Ã  imposer un strict respect des prÃ©sentes Conditions d'utilisation ne pourra Ãªtre interprÃ©tÃ© comme une renonciation par Apple Ã  toute disposition ou tout droit dont Apple dispose pour faire appliquer ces Conditions d'utilisation. De mÃªme, le cours des relations entre Apple et vous ou un tiers ne pourra Ãªtre interprÃ©tÃ© comme modifiant les dispositions des prÃ©sentes Conditions d'utilisation. Les prÃ©sentes Conditions d'utilisation ne pourront Ãªtre interprÃ©tÃ©es comme confÃ©rant des droits ou des voies de recours Ã  un tiers. Les sites d'Apple donnent accÃ¨s Ã  des donnÃ©es internationales d'Apple et peuvent, par consÃ©quent, contenir des rÃ©fÃ©rences ou des rÃ©fÃ©rences croisÃ©es Ã  des produits, programmes et services Apple qui n'ont pas Ã©tÃ© annoncÃ©s dans votre pays. De telles rÃ©fÃ©rences n'impliquent pas qu'Apple compte annoncer la sortie de ces produits, programmes et services dans votre pays. Commentaires et informations Tous les commentaires que vous nous faites parvenir sur le Site seront considÃ©rÃ©s comme non confidentiels. Apple sera libre d'utiliser ces informations sans aucune restriction. Les informations contenues sur ce site web sont susceptibles d'Ãªtre modifiÃ©es sans prÃ©avis. Copyright Â© 1997-2007 Apple Inc. Tous droits rÃ©servÃ©s. Apple Inc. 1 Infinite Loop, Cupertino, CA 95014, Ã‰tats-Unis Mis Ã  jour par l'Ã©quipe du service juridique d'Apple le 11/01/07"

let bigUnescapableText = "Toutes les mentions concernant les produits Apple sont fournies &agrave; titre d'information. Elles ne constituent pas un engagement de la part d'Apple. Les informations contenues sur le serveur Apple ne sont pas contractuelles. Elles peuvent &ecirc;tre modifi&eacute;es &agrave; tout moment et ne sauraient engager la responsabilit&eacute; d'Apple Computer France. Conform&eacute;ment au Code de la Propri&eacute;t&eacute; Intellectuelle, sont autoris&eacute;es les copies ou reproductions strictement r&eacute;serv&eacute;es &agrave; l'usage priv&eacute; du copiste et non destin&eacute;es &agrave; une utilisation collective et les repr&eacute;sentations priv&eacute;es et gratuites effectu&eacute;es exclusivement dans un cercle de famille. De m&ecirc;me, sont autoris&eacute;es, sous r&eacute;serve que soient indiqu&eacute;s clairement le nom de l'auteur et la source, les analyses et courtes citations justifi&eacute;es par le caract&egrave;re critique, pol&eacute;mique, p&eacute;dagogique, scientifique ou d'information de l'oeuvre &agrave; laquelle elles sont incorpor&eacute;es. Toute autre utilisation de tout ou partie du contenu du pr&eacute;sent site Web et ceci comprend notamment, les documents, &eacute;l&eacute;ments graphiques, logiciels, et autres pr&eacute;sentations sont interdites. Apple, le logo Apple, Macintosh sont des marques d&eacute;pos&eacute;es d'Apple Computer, Inc. Les autres marques cit&eacute;es sont des marques d&eacute;pos&eacute;es par leur propri&eacute;taire respectif. Droits de rectification Les informations dans ce formulaire sont destin&eacute;es &agrave; nos services internes et &agrave; nos partenaires. Vous disposez d'un droit d'acc&egrave;s et de rectification sur ces informations, que vous pouvez exercer aupr&egrave;s de : Apple Computer France 12, avenue d'Oc&eacute;anie 91956 Les Ulis. T&eacute;l&eacute;chargement de logiciels Droits d'auteurs - Logiciels Apple Apple Computer, B.V. Contrat de Licence Logiciel LISEZ SOIGNEUSEMENT CE CONTRAT DE LICENCE LOGICIEL &quot;LICENCE&quot; AVANT DE TELECHARGER OU D'UTILISER LE LOGICIEL. EN TELECHARGEANT OU EN UTILISANT LE LOGICIEL, VOUS ACCEPTEZ D'ETRE LIE PAR LES TERMES DE CETTE LICENCE. SI VOUS N'ETES PAS D'ACCORD AVEC LESDITS TERMES, VOUS N'ETES PAS AUTORISE A TELECHARGER OU UTILISER LE LOGICIEL. 1. Licence. Apple Computer, B.V. ou le cas &eacute;ch&eacute;ant, une filiale locale d'Apple Computer, Inc. (&quot;Apple&quot;) vous conc&egrave;de une licence sur, et en aucun cas ne vend, le Logiciel Apple et les fontes accompagnant la pr&eacute;sente Licence, qu'ils soient t&eacute;l&eacute;charg&eacute;s ou qu'ils soient sur disquette, sur m&eacute;moire morte (ROM) ou sur tout autre support (le &quot;Logiciel Apple&quot;). Vous &ecirc;tes propri&eacute;taire du support sur lequel, le cas &eacute;ch&eacute;ant, le Logiciel Apple est enregistr&eacute; mais Apple et/ou les Conc&eacute;dant(s) d'Apple restent propri&eacute;taire(s) du Logiciel Apple. Le Logiciel Apple que vous avez re&ccedil;u ainsi que les copies, que la pr&eacute;sente Licence vous autorise &agrave; r&eacute;aliser, sont r&eacute;gis par les termes de la pr&eacute;sente Licence. 2. Utilisations Permises et Limitations. La pr&eacute;sente Licence vous autorise &agrave; installer et utiliser le Logiciel Apple sur un seul ordinateur Apple ou sous licence Apple &agrave; la fois. La pr&eacute;sente Licence n'autorise pas le fonctionnement du Logiciel Apple sur plus d'un ordinateur &agrave; la fois. Vous pouvez r&eacute;aliser une seule copie du Logiciel Apple en langage machine aux fins exclusives de sauvegarde. La copie de sauvegarde doit imp&eacute;rativement reproduire les informations relatives au droit d'auteur figurant sur l'original. Sauf et dans les limites o&ugrave; la loi ou la pr&eacute;sente Licence l'autorise, vous ne pouvez pas d&eacute;compiler, d&eacute;sosser, d&eacute;sassembler, modifier, transmettre, louer, pr&ecirc;ter ou cr&eacute;er des produits d&eacute;riv&eacute;s du Logiciel Apple. Si le Logiciel Apple contient des &eacute;l&eacute;ments de cryptologie, le Logiciel Apple ne pourra pas &ecirc;tre import&eacute; en, ni utilis&eacute; en, ni r&eacute;-export&eacute; hors de France ou de ses D&eacute;partements ou Territoires d'Outre-Mer. La pr&eacute;sente Licence sera r&eacute;sili&eacute;e imm&eacute;diatement et de plein droit, sans notification pr&eacute;alable de la part d'Apple, si vous ne vous conformez pas &agrave; l'une quelconque de ses dispositions. 3. Exclusion de Garantie sur le Logiciel Apple. Vous reconnaissez et admettez express&eacute;ment que l'utilisation du Logiciel Apple est &agrave; vos risques et p&eacute;rils. Le Logiciel Apple est fourni &quot;TEL QUEL&quot; sans garantie d'aucune sorte, et Apple et le(s) conc&eacute;dant(s) d'Apple (aux fins des dispositions des paragraphes 4 et 5, l'expression &quot;Apple&quot; d&eacute;signe collectivement Apple et le(s) conc&eacute;dant(s) d'Apple) EXCLUENT EXPRESSEMENT TOUTE GARANTIE, EXPLICITE OU IMPLICITE, Y COMPRIS DE FA&Ccedil;ON NON LIMITATIVE LES GARANTIES IMPLICITES DE QUALITE MARCHANDE ET D'ADEQUATION A UN USAGE PARTICULIER. APPLE NE GARANTIT PAS QUE LES FONCTIONS CONTENUES DANS LE LOGICIEL APPLE CORRESPONDRONT A VOS BESOINS OU QUE LE FONCTIONNEMENT DU LOGICIEL APPLE SERA ININTERROMPU, EXEMPT D'ERREUR OU QUE TOUT DEFAUT DU LOGICIEL APPLE SERA CORRIGE. DE PLUS, APPLE NE GARANTIT PAS NI NE FAIT AUCUNE DECLARATION CONCERNANT L'UTILISATION OU LES RESULTATS DE L'UTILISATION DU LOGICIEL APPLE OU DE LA DOCUMENTATION Y AFFERENT EN CE QUI CONCERNE LEUR EXACTITUDE, FIABILITE OU AUTREMENT. SANS DIMINUER LA PORTEE GENERALE DE CE QUI PRECEDE, APPLE NE GARANTIT NI NE FAIT AUCUNE DECLARATION OU GARANTIE CONCERNANT L'AUTHENTICITE OU LA SECURITE DE TOUTE SIGNATURE ELECTRONIQUE RESULTANT DE L'UTILISATION DU LOGICIEL APPLE OU NE GARANTIT NI NE FAIT AUCUNE DECLARATION QUE TOUTE PERSONNE PHYSIQUE OU MORALE UTILISANT UNE TELLE SIGNATURE ELECTRONIQUE EST HABILITEE &Agrave; LE FAIRE. AUCUNE INFORMATION OU CONSEIL, COMMUNIQUEE VERBALEMENT OU PAR ECRIT PAR APPLE OU PAR UN DE SES REPRESENTANTS AUTORISES NE POURRA CREER UNE GARANTIE OU AUGMENTER DE QUELQUE MANIERE QUE CE SOIT L'ETENDUE DE LA PRESENTE GARANTIE. SI LE LOGICIEL APPLE S'AVERAIT DEFECTUEUX, VOUS ASSUMEREZ SEUL (ET NON PAS APPLE NI UN REPRESENTANT AUTORISE D'APPLE) LE COUT TOTAL DE TOUT ENTRETIEN, REPARATION OU MODIFICATION NECESSAIRE. CERTAINES LEGISLATIONS NE PERMETTENT PAS L'EXCLUSION DE GARANTIES IMPLICITES, IL EST DONC POSSIBLE QUE L'EXCLUSION MENTIONNEE CI-DESSUS NE S'APPLIQUE PAS A VOUS. La disposition suivante n'est applicable que pour la France : les pr&eacute;sentes ne pourraient vous priver de vos droits &agrave; la garantie l&eacute;gale (en cas de d&eacute;fauts ou de vices cach&eacute;s), dans la mesure o&ugrave; elle trouverait &agrave; s'appliquer. 4. Limitation de Responsabilit&eacute;. EN AUCUN CAS, Y COMPRIS LA NEGLIGENCE, APPLE NE SERA RESPONSABLE DE QUELQUES DOMMAGES INDIRECTS, SPECIAUX OU ACCESSOIRES RESULTANT OU RELATIF &Agrave; LA PRESENTE LICENCE. CERTAINES JURIDICTIONS NE PERMETTENT PAS LA LIMITATION OU L'EXCLUSION DE RESPONSABILITE POUR DOMMAGES INDIRECTS OU ACCESSOIRES, IL EST DONC POSSIBLE QUE L'EXCLUSION OU LA LIMITATION MENTIONNEE CI-DESSUS NE S'APPLIQUE PAS A VOUS. La seule responsabilit&eacute; d'Apple envers vous au titre de tout dommage n'exc&eacute;dera en aucun cas la somme pay&eacute;e pour la pr&eacute;sente Licence du Logiciel Apple. 5. Engagement Relatif aux Exportations. Vous vous engagez &agrave; ce que le Logiciel Apple ne soit pas export&eacute;, &agrave; l'ext&eacute;rieur des Etats-Unis, sauf autorisation par les lois des Etats-Unis. Vous vous engagez &agrave; ce que tout Logiciel Apple licitement obtenu en dehors des Etats-Unis ne soit pas re-export&eacute;, sauf autorisation par les lois des Etats-Unis et du pays dans lequel vous avez obtenu le Logiciel Apple. 6. Gouvernement des Etats-Unis. Si le Logiciel Apple est fourni au Gouvernement des Etats-Unis, le Logiciel Apple est class&eacute; &quot;restricted computer software&quot; tel que ce terme est d&eacute;fini dans la clause 52.227-19 du FAR. Les droits du Gouvernement des Etats-Unis sur le Logiciel Apple sont d&eacute;finis pas la clause 52.227-19 du FAR. 7. Loi Applicable et Divisibilit&eacute; du Contrat. Si une filiale d'Apple Computer, Inc. est pr&eacute;sente dans le pays o&ugrave; vous avez t&eacute;l&eacute;charg&eacute; la pr&eacute;sente Licence du Logiciel Apple, la pr&eacute;sente Licence sera r&eacute;gie par la loi du pays dans lequel la filiale est install&eacute;e. Dans le cas contraire, la pr&eacute;sente Licence sera r&eacute;gie et interpr&eacute;t&eacute;e par les lois des Etats-Unis et de l'Etat de Californie dans les conditions qui s'appliquent aux accords conclus et enti&egrave;rement ex&eacute;cut&eacute;s sur l'Etat de Californie par deux personnes au statut de r&eacute;sident de l'Etat de Californie. Si pour une quelconque raison, un tribunal ayant juridiction juge qu'une disposition de la pr&eacute;sente Licence est inapplicable, en totalit&eacute; ou en partie, ladite disposition sera rendue opposable dans la mesure o&ugrave; elle pourra refl&eacute;ter le plus fid&egrave;lement possible l'intention des parties et les autres dispositions de la pr&eacute;sente Licence continueront &agrave; produire leur effet. 8. Entente Compl&egrave;te. Cette Licence constitue l'int&eacute;gralit&eacute; de l'accord entre les parties concernant l'utilisation du Logiciel Apple et remplace toutes les propositions ou accords ant&eacute;rieurs ou actuels, &eacute;crits ou verbaux, &agrave; ce sujet. Aucune modification de cette Licence n'aura quelque effet &agrave; moins d'&ecirc;tre stipul&eacute;e par &eacute;crit et sign&eacute;e par un repr&eacute;sentant d&ucirc;ment autoris&eacute; d'Apple. Droits d'auteurs - Logiciels Tiers Toutes les demandes d'informations, r&eacute;clamations et tout paiement des redevances concernant les logiciels sont &agrave; adresser directement aupr&egrave;s de leur auteur respectif. Les noms et coordonn&eacute;es des auteurs figurent sur le fichier texte accompagnant les logiciels. Apple Computer France n'offre aucune garantie en ce qui concerne les logiciels tiers et ne garantit pas que les informations contenues ci-dessous soient compl&egrave;tes ou exactes. Toutes les mentions concernant les produits Apple sont fournies &agrave; titre d'information. Elles ne constituent pas un engagement de la part d'Apple. Les informations contenues sur le serveur Apple ne sont pas contractuelles. Elles peuvent &ecirc;tre modifi&eacute;es &agrave; tout moment et ne sauraient engager la responsabilit&eacute; d'Apple Computer France. Conform&eacute;ment au Code de la Propri&eacute;t&eacute; Intellectuelle, sont autoris&eacute;es les copies ou reproductions strictement r&eacute;serv&eacute;es &agrave; l'usage priv&eacute; du copiste et non destin&eacute;es &agrave; une utilisation collective et les repr&eacute;sentations priv&eacute;es et gratuites effectu&eacute;es exclusivement dans un cercle de famille. De m&ecirc;me, sont autoris&eacute;es, sous r&eacute;serve que soient indiqu&eacute;s clairement le nom de l'auteur et la source, les analyses et courtes citations justifi&eacute;es par le caract&egrave;re critique, pol&eacute;mique, p&eacute;dagogique, scientifique ou d'information de l'oeuvre &agrave; laquelle elles sont incorpor&eacute;es. Toute autre utilisation de tout ou partie du contenu du pr&eacute;sent site Web et ceci comprend notamment, les documents, &eacute;l&eacute;ments graphiques, logiciels, et autres pr&eacute;sentations sont interdites. Apple, le logo Apple, Macintosh sont des marques d&eacute;pos&eacute;es d'Apple Computer, Inc. Les autres marques cit&eacute;es sont des marques d&eacute;pos&eacute;es par leur propri&eacute;taire respectif. Droits de rectification Les informations dans ce formulaire sont destin&eacute;es &agrave; nos services internes et &agrave; nos partenaires. Vous disposez d'un droit d'acc&egrave;s et de rectification sur ces informations, que vous pouvez exercer aupr&egrave;s de : Apple Computer France 12, avenue d'Oc&eacute;anie 91956 Les Ulis. T&eacute;l&eacute;chargement de logiciels Droits d'auteurs - Logiciels Apple Apple Computer, B.V. Contrat de Licence Logiciel LISEZ SOIGNEUSEMENT CE CONTRAT DE LICENCE LOGICIEL &quot;LICENCE&quot; AVANT DE TELECHARGER OU D'UTILISER LE LOGICIEL. EN TELECHARGEANT OU EN UTILISANT LE LOGICIEL, VOUS ACCEPTEZ D'ETRE LIE PAR LES TERMES DE CETTE LICENCE. SI VOUS N'ETES PAS D'ACCORD AVEC LESDITS TERMES, VOUS N'ETES PAS AUTORISE A TELECHARGER OU UTILISER LE LOGICIEL. 1. Licence. Apple Computer, B.V. ou le cas &eacute;ch&eacute;ant, une filiale locale d'Apple Computer, Inc. (&quot;Apple&quot;) vous conc&egrave;de une licence sur, et en aucun cas ne vend, le Logiciel Apple et les fontes accompagnant la pr&eacute;sente Licence, qu'ils soient t&eacute;l&eacute;charg&eacute;s ou qu'ils soient sur disquette, sur m&eacute;moire morte (ROM) ou sur tout autre support (le &quot;Logiciel Apple&quot;). Vous &ecirc;tes propri&eacute;taire du support sur lequel, le cas &eacute;ch&eacute;ant, le Logiciel Apple est enregistr&eacute; mais Apple et/ou les Conc&eacute;dant(s) d'Apple restent propri&eacute;taire(s) du Logiciel Apple. Le Logiciel Apple que vous avez re&ccedil;u ainsi que les copies, que la pr&eacute;sente Licence vous autorise &agrave; r&eacute;aliser, sont r&eacute;gis par les termes de la pr&eacute;sente Licence. 2. Utilisations Permises et Limitations. La pr&eacute;sente Licence vous autorise &agrave; installer et utiliser le Logiciel Apple sur un seul ordinateur Apple ou sous licence Apple &agrave; la fois. La pr&eacute;sente Licence n'autorise pas le fonctionnement du Logiciel Apple sur plus d'un ordinateur &agrave; la fois. Vous pouvez r&eacute;aliser une seule copie du Logiciel Apple en langage machine aux fins exclusives de sauvegarde. La copie de sauvegarde doit imp&eacute;rativement reproduire les informations relatives au droit d'auteur figurant sur l'original. Sauf et dans les limites o&ugrave; la loi ou la pr&eacute;sente Licence l'autorise, vous ne pouvez pas d&eacute;compiler, d&eacute;sosser, d&eacute;sassembler, modifier, transmettre, louer, pr&ecirc;ter ou cr&eacute;er des produits d&eacute;riv&eacute;s du Logiciel Apple. Si le Logiciel Apple contient des &eacute;l&eacute;ments de cryptologie, le Logiciel Apple ne pourra pas &ecirc;tre import&eacute; en, ni utilis&eacute; en, ni r&eacute;-export&eacute; hors de France ou de ses D&eacute;partements ou Territoires d'Outre-Mer. La pr&eacute;sente Licence sera r&eacute;sili&eacute;e imm&eacute;diatement et de plein droit, sans notification pr&eacute;alable de la part d'Apple, si vous ne vous conformez pas &agrave; l'une quelconque de ses dispositions. 3. Exclusion de Garantie sur le Logiciel Apple. Vous reconnaissez et admettez express&eacute;ment que l'utilisation du Logiciel Apple est &agrave; vos risques et p&eacute;rils. Le Logiciel Apple est fourni &quot;TEL QUEL&quot; sans garantie d'aucune sorte, et Apple et le(s) conc&eacute;dant(s) d'Apple (aux fins des dispositions des paragraphes 4 et 5, l'expression &quot;Apple&quot; d&eacute;signe collectivement Apple et le(s) conc&eacute;dant(s) d'Apple) EXCLUENT EXPRESSEMENT TOUTE GARANTIE, EXPLICITE OU IMPLICITE, Y COMPRIS DE FA&Ccedil;ON NON LIMITATIVE LES GARANTIES IMPLICITES DE QUALITE MARCHANDE ET D'ADEQUATION A UN USAGE PARTICULIER. APPLE NE GARANTIT PAS QUE LES FONCTIONS CONTENUES DANS LE LOGICIEL APPLE CORRESPONDRONT A VOS BESOINS OU QUE LE FONCTIONNEMENT DU LOGICIEL APPLE SERA ININTERROMPU, EXEMPT D'ERREUR OU QUE TOUT DEFAUT DU LOGICIEL APPLE SERA CORRIGE. DE PLUS, APPLE NE GARANTIT PAS NI NE FAIT AUCUNE DECLARATION CONCERNANT L'UTILISATION OU LES RESULTATS DE L'UTILISATION DU LOGICIEL APPLE OU DE LA DOCUMENTATION Y AFFERENT EN CE QUI CONCERNE LEUR EXACTITUDE, FIABILITE OU AUTREMENT. SANS DIMINUER LA PORTEE GENERALE DE CE QUI PRECEDE, APPLE NE GARANTIT NI NE FAIT AUCUNE DECLARATION OU GARANTIE CONCERNANT L'AUTHENTICITE OU LA SECURITE DE TOUTE SIGNATURE ELECTRONIQUE RESULTANT DE L'UTILISATION DU LOGICIEL APPLE OU NE GARANTIT NI NE FAIT AUCUNE DECLARATION QUE TOUTE PERSONNE PHYSIQUE OU MORALE UTILISANT UNE TELLE SIGNATURE ELECTRONIQUE EST HABILITEE &Agrave; LE FAIRE. AUCUNE INFORMATION OU CONSEIL, COMMUNIQUEE VERBALEMENT OU PAR ECRIT PAR APPLE OU PAR UN DE SES REPRESENTANTS AUTORISES NE POURRA CREER UNE GARANTIE OU AUGMENTER DE QUELQUE MANIERE QUE CE SOIT L'ETENDUE DE LA PRESENTE GARANTIE. SI LE LOGICIEL APPLE S'AVERAIT DEFECTUEUX, VOUS ASSUMEREZ SEUL (ET NON PAS APPLE NI UN REPRESENTANT AUTORISE D'APPLE) LE COUT TOTAL DE TOUT ENTRETIEN, REPARATION OU MODIFICATION NECESSAIRE. CERTAINES LEGISLATIONS NE PERMETTENT PAS L'EXCLUSION DE GARANTIES IMPLICITES, IL EST DONC POSSIBLE QUE L'EXCLUSION MENTIONNEE CI-DESSUS NE S'APPLIQUE PAS A VOUS. La disposition suivante n'est applicable que pour la France : les pr&eacute;sentes ne pourraient vous priver de vos droits &agrave; la garantie l&eacute;gale (en cas de d&eacute;fauts ou de vices cach&eacute;s), dans la mesure o&ugrave; elle trouverait &agrave; s'appliquer. 4. Limitation de Responsabilit&eacute;. EN AUCUN CAS, Y COMPRIS LA NEGLIGENCE, APPLE NE SERA RESPONSABLE DE QUELQUES DOMMAGES INDIRECTS, SPECIAUX OU ACCESSOIRES RESULTANT OU RELATIF &Agrave; LA PRESENTE LICENCE. CERTAINES JURIDICTIONS NE PERMETTENT PAS LA LIMITATION OU L'EXCLUSION DE RESPONSABILITE POUR DOMMAGES INDIRECTS OU ACCESSOIRES, IL EST DONC POSSIBLE QUE L'EXCLUSION OU LA LIMITATION MENTIONNEE CI-DESSUS NE S'APPLIQUE PAS A VOUS. La seule responsabilit&eacute; d'Apple envers vous au titre de tout dommage n'exc&eacute;dera en aucun cas la somme pay&eacute;e pour la pr&eacute;sente Licence du Logiciel Apple. 5. Engagement Relatif aux Exportations. Vous vous engagez &agrave; ce que le Logiciel Apple ne soit pas export&eacute;, &agrave; l'ext&eacute;rieur des Etats-Unis, sauf autorisation par les lois des Etats-Unis. Vous vous engagez &agrave; ce que tout Logiciel Apple licitement obtenu en dehors des Etats-Unis ne soit pas re-export&eacute;, sauf autorisation par les lois des Etats-Unis et du pays dans lequel vous avez obtenu le Logiciel Apple. 6. Gouvernement des Etats-Unis. Si le Logiciel Apple est fourni au Gouvernement des Etats-Unis, le Logiciel Apple est class&eacute; &quot;restricted computer software&quot; tel que ce terme est d&eacute;fini dans la clause 52.227-19 du FAR. Les droits du Gouvernement des Etats-Unis sur le Logiciel Apple sont d&eacute;finis pas la clause 52.227-19 du FAR. 7. Loi Applicable et Divisibilit&eacute; du Contrat. Si une filiale d'Apple Computer, Inc. est pr&eacute;sente dans le pays o&ugrave; vous avez t&eacute;l&eacute;charg&eacute; la pr&eacute;sente Licence du Logiciel Apple, la pr&eacute;sente Licence sera r&eacute;gie par la loi du pays dans lequel la filiale est install&eacute;e. Dans le cas contraire, la pr&eacute;sente Licence sera r&eacute;gie et interpr&eacute;t&eacute;e par les lois des Etats-Unis et de l'Etat de Californie dans les conditions qui s'appliquent aux accords conclus et enti&egrave;rement ex&eacute;cut&eacute;s sur l'Etat de Californie par deux personnes au statut de r&eacute;sident de l'Etat de Californie. Si pour une quelconque raison, un tribunal ayant juridiction juge qu'une disposition de la pr&eacute;sente Licence est inapplicable, en totalit&eacute; ou en partie, ladite disposition sera rendue opposable dans la mesure o&ugrave; elle pourra refl&eacute;ter le plus fid&egrave;lement possible l'intention des parties et les autres dispositions de la pr&eacute;sente Licence continueront &agrave; produire leur effet. 8. Entente Compl&egrave;te. Cette Licence constitue l'int&eacute;gralit&eacute; de l'accord entre les parties concernant l'utilisation du Logiciel Apple et remplace toutes les propositions ou accords ant&eacute;rieurs ou actuels, &eacute;crits ou verbaux, &agrave; ce sujet. Aucune modification de cette Licence n'aura quelque effet &agrave; moins d'&ecirc;tre stipul&eacute;e par &eacute;crit et sign&eacute;e par un repr&eacute;sentant d&ucirc;ment autoris&eacute; d'Apple. Droits d'auteurs - Logiciels Tiers Toutes les demandes d'informations, r&eacute;clamations et tout paiement des redevances concernant les logiciels sont &agrave; adresser directement aupr&egrave;s de leur auteur respectif. Les noms et coordonn&eacute;es des auteurs figurent sur le fichier texte accompagnant les logiciels. Apple Computer France n'offre aucune garantie en ce qui concerne les logiciels tiers et ne garantit pas que les informations contenues ci-dessous soient compl&egrave;tes ou exactes."

let escapableTweet = "@LeMonde: #Dopage Martin Fourcade [@martinfkde] dÃ©nonce la Â« mascarade Â» des Â« pseudosanctions Â» contre le biathlon russe"
let escapedTweet = "@LeMonde: #Dopage Martin Fourcade [@martinfkde] d&eacute;nonce la &#x00ab; mascarade &#x00bb; des &#x00ab; pseudosanctions &#x00bb; contre le biathlon russe"

let egc = "I ðŸ’™ the ðŸ‡ºðŸ‡¸"
let escapedEGC = "I &#55357;&#56473; the &#127482;&#127480;"

// MARK: - Functions

func test() -> [String: TimeInterval] {

    var result = [String: TimeInterval]()

    /* --- */

    print("ðŸ‘‰  Unicode-escaping 2 emojis")

    let emojiUnicodeEscape = measure {
        _ = egc.escapingForUnicodeHTML
    }

    result["Unicode-escaping 2 emojis"] = emojiUnicodeEscape

    /* --- */

    print("ðŸ‘‰  ASCII-escaping 2 emojis")

    let emojiASCIIEscape = measure {
        _ = egc.escapingForASCIIHTML
    }

    result["ASCII-escaping 2 emojis"] = emojiASCIIEscape

    /* --- */

    print("ðŸ‘‰  Unescaping 2 emojis")

    let emojiUnescape = measure {
        _ = escapedEGC.unescapingFromHTML
    }

    result["Unescaping 2 emojis"] = emojiUnescape

    /* --- */

    print("ðŸ‘‰  Unescaping a tweet")

    let tweetUnescape = measure {
        _ = escapedTweet.unescapingFromHTML
    }

    result["Unescaping a tweet"] = tweetUnescape

    /* --- */

    print("ðŸ‘‰  Unicode-escaping a tweet")

    let tweetUnicodeEscape = measure {
        _ = escapableTweet.escapingForUnicodeHTML
    }

    result["Unicode-escaping a tweet"] = tweetUnicodeEscape

    /* --- */

    print("ðŸ‘‰  ASCII-escaping a tweet")

    let tweetASCIIEscape = measure {
        _ = escapableTweet.escapingForASCIIHTML
    }

    result["ASCII-escaping a tweet"] = tweetASCIIEscape

    /* --- */

    print("ðŸ‘‰  Unicode-escaping 3,568 words")

    let bigTextEscapeUnicode = measure {
        _ = bigEscapableText.escapingForUnicodeHTML
    }

    result["Unicode-escaping 3,568 words"] = bigTextEscapeUnicode

    /* --- */

    print("ðŸ‘‰  ASCII-escaping 3,568 words")

    let bigTextEscapeASCII = measure {
        _ = bigEscapableText.escapingForASCIIHTML
    }

    result["ASCII-escaping 3,568 words"] = bigTextEscapeASCII

    /* --- */

    print("ðŸ‘‰  Unescaping 3,026 words with 366 escapes")

    let bigTextUnescape = measure {
        _ = bigUnescapableText.unescapingFromHTML
    }

    result["Unescaping 3,026 words with 366 escapes"] = bigTextUnescape

    /* --- */

    return result

}

func table(from results: [String: TimeInterval]) -> String {

    let sortedResults = results.sorted { $0.value < $1.value }

    let header1 = "| Task | v\(version) |"
    let header2 = "|:---|---|"

    var lines = [header1, header2]

    for (task, result) in sortedResults {
        let line = "| \(task) | \(result)s |"
        lines.append(line)
    }

    return lines.joined(separator: "\n")

}

// MARK: - Process

print("ðŸ“ˆ  HTMLString Performance Benchmark")
print()

let results = test()
let outputTable = table(from: results)

print()
print("âœ…  Benchmark Complete")

print(outputTable)
